@startuml
'https://plantuml.com/class-diagram

package "IDMP Datamodel" as idmpDatamodel <<frame>> {
    entity RouteOfAdministration {
        display: String
    }

    entity UnitOfPresentation {
        display: String
    }

    together {
        entity EDQMDoseForm {
            display: String
            isValidAdministrableDoseForm: Boolean
        }

        entity Strength {
            numeratorValue: Float
            denominatorValue: Float
            numeratorUnit: Unit
            denominatorUnit: Unit
            isPresentationStrength: Boolean
        }

        entity SubstanceWithRolePAI {
            ingredientCode: String
        }
    }

    entity PharmaceuticalProduct {
        phpId: String
        ingredientCode: String
    }

    entity MedicinalProduct {
        country: Country
        mpId: String
        fullName: String
        packSize: Integer
        packDescription: String
    }

    entity PackagedMedicinalProduct {
        pcId: String
        atcCode: String
        packageSize: Integer
    }

    entity Organization {
        name: String
    }

    SubstanceWithRolePAI "1" o---- "*" PharmaceuticalProduct : preciseActiveIngredient
    SubstanceWithRolePAI "1" o- "0..1" SubstanceWithRolePAI : moiety
    EDQMDoseForm "1" o-- "*" PharmaceuticalProduct : administrableDoseForm
    Strength "1" -- "1" PharmaceuticalProduct : normalizedStrength

    PharmaceuticalProduct "1" o-- "*" MedicinalProduct : pharmaceuticalProduct

    MedicinalProduct "1" o-- "*" PackagedMedicinalProduct : medicinalProduct
    MedicinalProduct "*" --o "1" EDQMDoseForm : pharmaceuticalDoseForm
    MedicinalProduct "1" -- "1" Strength : authorizedStrength
    RouteOfAdministration "*" - "*" MedicinalProduct : routesOfAdministration
    ' UnitOfPresentation "1" o- "*" MedicinalProduct : unitOfPresentation
    UnitOfPresentation "1" o-- "*" Strength: unitOfPresentation

    MedicinalProduct "*" -o "1" Organization : marketingAuthorizationHolder

    Strength "*" -o "1" SubstanceWithRolePAI : referenceSubstance
}
@enduml
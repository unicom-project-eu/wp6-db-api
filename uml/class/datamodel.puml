@startuml
'https://plantuml.com/class-diagram

package "IDMP Datamodel" as idmpDatamodel <<frame>> {
    entity EdqmRouteOfAdministration {
        * id: Long <<generated>>
        --
        * code: String <<unique>>
        * display: String
    }

    entity EdqmUnitOfPresentation {
        * id: Long <<generated>>
        --
        * code: String <<unique>>
        * display: String
    }

    together {
        entity EdqmDoseForm {
            * id: Long <<generated>>
            --
            * code: String <<unique>>
            * display: String
        }

        entity Strength {
            * id: Long <<generated>>
            --
            * referenceNumeratorValue: Float
            * referenceNumeratorUnit: Unit
            referenceDenominatorValue: Float
            referenceDenominatorUnit: Unit
            numeratorValue: Float
            numeratorUnit: Unit
            denominatorValue: Float
            denominatorUnit: Unit
            * isPresentationStrength: Boolean
        }

        entity SubstanceWithRolePai {
            * id: Long <<generated>>
            --
            * ingredientCode: String <<unique>>
            * moiety: String
            modifier: String
        }

        note left of Strength {
                    **Strength:** both moiety and modifier
                    **Reference strength:** moiety only
                }
    }

    entity PharmaceuticalProduct {
        * id: Long <<generated>>
        --
        * phpId: String <<unique>>
    }

    entity MedicinalProduct {
        * id: Long <<generated>>
        --
        * mpId: String <<unique>>
        * country: Country
        * fullName: String
        * packSize: Integer
        * atcCode: String
        packDescription: String
    }

    entity PackagedMedicinalProduct {
        * id: Long <<generated>>
        --
        * pcId: String <<unique>>
        * packageSize: Integer
    }

    entity Organization {
        * id: Long <<generated>>
        --
        * name: String
    }

    EdqmDoseForm ||--o{ PharmaceuticalProduct : administrableDoseForm
    Strength ||--o| PharmaceuticalProduct : normalizedStrength

    PharmaceuticalProduct ||--o{ MedicinalProduct : pharmaceuticalProduct

    MedicinalProduct ||--o{ PackagedMedicinalProduct : medicinalProduct
    MedicinalProduct }o--|| EdqmDoseForm : pharmaceuticalDoseForm
    MedicinalProduct |o--|| Strength : authorizedStrength
    EdqmRouteOfAdministration }o-o{ MedicinalProduct : routesOfAdministration
    EdqmUnitOfPresentation ||--o{ Strength: unitOfPresentation

    MedicinalProduct }o-|| Organization : marketingAuthorizationHolder

    Strength }o-|| SubstanceWithRolePai : referenceSubstance
}
@enduml
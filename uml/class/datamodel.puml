@startuml
'https://plantuml.com/class-diagram

package "IDMP Datamodel" as idmpDatamodel <<frame>> {
    entity EdqmRouteOfAdministration {
        display: String
    }

    entity EdqmUnitOfPresentation {
        display: String
    }

    together {
        entity EdqmDoseForm {
            display: String
            isValidAdministrableDoseForm: Boolean
        }

        entity Strength {
            numeratorValue: Float
            denominatorValue: Float
            numeratorUnit: Unit
            denominatorUnit: Unit
            isPresentationStrength: Boolean
        }

        entity SubstanceWithRolePai {
            ingredientCode: String
            moiety: String
            modifier: String
        }
    }

    entity PharmaceuticalProduct {
        phpId: String
        ingredientCode: String
    }

    entity MedicinalProduct {
        country: Country
        mpId: String
        fullName: String
        packSize: Integer
        packDescription: String
    }

    entity PackagedMedicinalProduct {
        pcId: String
        atcCode: String
        packageSize: Integer
    }

    entity Organization {
        name: String
    }

    SubstanceWithRolePai ||------o{ PharmaceuticalProduct : preciseActiveIngredient
    EdqmDoseForm ||--o{ PharmaceuticalProduct : administrableDoseForm
    Strength ||--|| PharmaceuticalProduct : normalizedStrength

    PharmaceuticalProduct ||--o{ MedicinalProduct : pharmaceuticalProduct

    MedicinalProduct ||--o{ PackagedMedicinalProduct : medicinalProduct
    MedicinalProduct }o--|| EdqmDoseForm : pharmaceuticalDoseForm
    MedicinalProduct ||--|| Strength : authorizedStrength
    EdqmRouteOfAdministration }o-o{ MedicinalProduct : routesOfAdministration
    EdqmUnitOfPresentation ||--o{ Strength: unitOfPresentation

    MedicinalProduct }o-|| Organization : marketingAuthorizationHolder

    Strength }o-|| SubstanceWithRolePai : referenceSubstance
}
@enduml
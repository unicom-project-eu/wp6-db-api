@startuml
'https://plantuml.com/class-diagram

package "IDMP Datamodel" as idmpDatamodel <<frame>> {
    entity EdqmRouteOfAdministration {
        display: String
    }

    entity EdqmUnitOfPresentation {
        display: String
    }

    entity Modifier {
        display: String
    }

    together {
        entity EdqmDoseForm {
            display: String
            isValidAdministrableDoseForm: Boolean
        }

        entity Strength {
            numeratorValue: Float
            denominatorValue: Float
            numeratorUnit: Unit
            denominatorUnit: Unit
            isPresentationStrength: Boolean
        }

        entity SubstanceWithRolePAI {
            ingredientCode: String
            display: String
        }
    }

    entity PharmaceuticalProduct {
        phpId: String
        ingredientCode: String
    }

    entity MedicinalProduct {
        country: Country
        mpId: String
        fullName: String
        packSize: Integer
        packDescription: String
    }

    entity PackagedMedicinalProduct {
        pcId: String
        atcCode: String
        packageSize: Integer
    }

    entity Organization {
        name: String
    }

    Modifier "1" o-- "*" SubstanceWithRolePAI : modifier

    SubstanceWithRolePAI "1" o------ "*" PharmaceuticalProduct : preciseActiveIngredient
    EdqmDoseForm "1" o-- "*" PharmaceuticalProduct : administrableDoseForm
    Strength "1" -- "1" PharmaceuticalProduct : normalizedStrength

    PharmaceuticalProduct "1" o-- "*" MedicinalProduct : pharmaceuticalProduct

    MedicinalProduct "1" o-- "*" PackagedMedicinalProduct : medicinalProduct
    MedicinalProduct "*" --o "1" EdqmDoseForm : pharmaceuticalDoseForm
    MedicinalProduct "1" -- "1" Strength : authorizedStrength
    EdqmRouteOfAdministration "*" - "*" MedicinalProduct : routesOfAdministration
    EdqmUnitOfPresentation "1" o-- "*" Strength: unitOfPresentation

    MedicinalProduct "*" -o "1" Organization : marketingAuthorizationHolder

    Strength "*" -o "1" SubstanceWithRolePAI : referenceSubstance
}
@enduml